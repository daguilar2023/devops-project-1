{% extends 'base.html' %}

{% block title %}
  {% if readonly %}
    {{ post.title }} — My Blog
  {% else %}
    {{ 'Edit' if post else 'New' }} Post — Admin
  {% endif %}
{% endblock %}

{% block content %}
  {% if readonly %}
    <article class="mx-auto" style="max-width: 800px;">
      <h1 class="mb-3">{{ post.title }}</h1>
      <p class="text-muted"><small>Published {{ post.created_at.strftime('%Y-%m-%d %H:%M') }}</small></p>
      <div style="white-space: pre-wrap;">{{ post.content }}</div>
    </article>
  {% else %}
    <h1 class="mb-3">{{ 'Edit' if post else 'New' }} Post</h1>
    <form method="post">
      <div class="mb-3">
        <label class="form-label">Title</label>
        <input name="title" class="form-control" required value="{{ post.title if post else '' }}" />
      </div>
      <div class="mb-3">
        <label class="form-label">Content</label>
        <textarea name="content" class="form-control" rows="12" required>{{ post.content if post else '' }}</textarea>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-primary" type="submit">Save</button>
        <a class="btn btn-secondary" href="{{ url_for('admin_home') }}">Cancel</a>
      </div>
    </form>
  {% endif %}
{% endblock %}